{"mappings":"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","sources":["src/protected.js"],"sourcesContent":["//Definierar URL:s\r\nconst Url = \"http://localhost:3000/api\";\r\nconst url_Login = `${Url}/login`;\r\nconst url_Protected = `${Url}/Protected`;\r\nconst url_Menu = `${Url}/menu`;\r\n\r\n\r\n\r\n//**********Formulärhantering******\r\n\r\n    //Hämta ID för log-in formulär\r\n    const loginForm = document.getElementById(\"loginForm\");\r\n\r\n    //Kontroll om formulär finns\r\n    if(!loginForm) {\r\n        console.error(\"Kan inte hitta formulär.\");\r\n     \r\n    } else {\r\n        console.log(\"Log-in formulär hittades.\");\r\n    \r\n    //Händelselyssnar för login-formulär\r\n    loginForm.addEventListener(\"submit\", async function(event) {\r\n        event.preventDefault();\r\n        console.log(\"Formulär skickades in.\");\r\n\r\n    \r\n        const username = document.getElementById(\"loginUsername\").value;\r\n        const password = document.getElementById(\"loginPassword\").value;\r\n    \r\n        //Kontrollera inputfält\r\n        if(!username || !password) {\r\n            console.error(\"Användarnamn och lösenord krävs.\");\r\n            return;\r\n        }\r\n            await logIn(username, password);\r\n    \r\n        //Återställer input-fält\r\n        document.getElementById(\"loginUsername\").value = \"\";\r\n        document.getElementById(\"loginPassword\").value = \"\";\r\n    \r\n    });\r\n}\r\n\r\n//******Funktion för logga in*************'\r\n\r\nasync function logIn(username, password) {\r\n\r\n    try{\r\n        const response = await fetch(url_Login, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ username, password })\r\n        });\r\n\r\n        const data = await response.json();\r\n        console.log(data);\r\n\r\n        if (data.token) {\r\n            localStorage.setItem(\"token\", data.token);\r\n            window.location.href = \"protected.html\";\r\n        \r\n        }else{\r\n            //Felaktig input\r\n            const errorContainer = document.getElementById(\"error_container\");\r\n            const errorList = document.getElementById(\"error_list\");\r\n\r\n            errorList.innerHTML = \"\";\r\n            const li = document.createElement(\"li\");\r\n\r\n            li.textContent =\"Fel användarnamn/lösenord\";\r\n            li.style.color = \"white\";\r\n            li.style.listStyle = \"none\";\r\n            li.style.textAlign = \"center\";\r\n\r\n            errorList.appendChild(li);\r\n            errorContainer.style.display = \"block\";\r\n        }       \r\n} catch (error) {\r\n    console.error(\"Error logging in:\", error);\r\n}\r\n}    \r\n\r\n\r\n//***********Funktion för att hämta skyddad data*********'\r\n\r\nasync function getProtectedData() {\r\n    try{\r\n        const token = localStorage.getItem(\"token\");\r\n        const response = await fetch(url_Protected, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\": `Bearer ${token}`\r\n            }\r\n        });\r\n\r\n        const data = await response.json();\r\n        console.log(data);\r\n\r\n        //Hämtar ID\r\n        const protectedContent = document.getElementById(\"protectedContent\");\r\n        protectedContent.classList.add(\"protectedContent\")\r\n        protectedContent.innerHTML = `<p>Välkommen anställd Id-nr 1</p>`\r\n        const protectedData = document.getElementById(\"protectedData\")\r\n        protectedData.classList.add(\"protectedData\")\r\n    \r\n    } catch (error) {\r\n        console.error(\"Error vid fetching av data:\", error);\r\n    }\r\n}\r\n\r\n//********** Funktion för hämtning av data ***********\r\n\r\n//Hämta in meny\r\nasync function fetchMenu() {\r\n    try{\r\n        const response = await fetch(url_Menu, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        });\r\n\r\n        //Kontroll kring fetch\r\n        if(!response.ok){\r\n            throw new Error(`Http error! Statis: ${response.status}`);\r\n        }\r\n\r\n        const menuData = await response.json();\r\n        renderMenu(menuData);\r\n    } catch (error) {\r\n        console.error('Error fetching menu:', error);\r\n    }\r\n\r\n}\r\n\r\n//Funktion för rendering av meny\r\nfunction renderMenu(menuData) {\r\n    const menuContainer = document.querySelector(\".menu-categories\");\r\n    menuContainer.innerHTML = \"\";                                      //Rensar innehåll\r\n\r\n    menuData.forEach(item => {\r\n        //Kontroll över format från fetch\r\n        if (!item.name || !item.description || !item.price || !item._id) {\r\n            console.error('Invalid item format:', item);\r\n            return;\r\n        }\r\n\r\n        //Skapat element för utskrift \r\n        const menuItemDiv = document.createElement('div');\r\n        menuItemDiv.classList.add('menu-item');\r\n\r\n        const itemInfoDiv = document.createElement('div');\r\n        itemInfoDiv.classList.add('menu-item-info');\r\n\r\n        const itemName = document.createElement('h4');\r\n        itemName.textContent = item.name;\r\n        itemInfoDiv.appendChild(itemName);\r\n\r\n        const itemDescription = document.createElement('p');\r\n        itemDescription.textContent = item.description;\r\n        itemInfoDiv.appendChild(itemDescription);\r\n\r\n        const itemPrice = document.createElement('span');\r\n        itemPrice.classList.add('price');\r\n        itemPrice.textContent = `${item.price} SEK`;\r\n        itemInfoDiv.appendChild(itemPrice);\r\n\r\n        menuItemDiv.appendChild(itemInfoDiv);\r\n\r\n        const deleteBtn = document.createElement('button');\r\n        deleteBtn.classList.add('deleteBtn');\r\n        deleteBtn.textContent = 'Radera';\r\n\r\n        menuItemDiv.appendChild(deleteBtn);\r\n        menuContainer.appendChild(menuItemDiv);\r\n    });\r\n}\r\n        \r\n//******Funktion för att logga ut********\r\nfunction logOut() {\r\n    localStorage.removeItem(\"token\");                                           //Tar bort token vid utlogg\r\n    document.getElementById(\"protectedData\").style.display = \"none\";            //Gömmer ID vid utlogg\r\n    window.location.href = 'index.html';\r\n}\r\n\r\n//Anropar fetch \r\ndocument.addEventListener(\"DOMContentLoaded\", fetchMenu);\r\n\r\n"],"names":[],"version":3,"file":"login.083fdc3b.js.map","sourceRoot":"/__parcel_source_root/"}