{"mappings":"AAAA,kBAAkB;AAClB,MAAM,MAAM;AACZ,MAAM,YAAY,CAAC,EAAE,IAAI,MAAM,CAAC;AAChC,MAAM,gBAAgB,CAAC,EAAE,IAAI,UAAU,CAAC;AAExC,SAAS,gBAAgB,CAAC,oBAAoB;IAE1C,8BAA8B;IAC9B,MAAM,YAAY,SAAS,cAAc,CAAC;IAE1C,4BAA4B;IAC5B,IAAG,CAAC,WAAW;QACX,QAAQ,KAAK,CAAC;QACd;IACJ;IAEA,oCAAoC;IACpC,UAAU,gBAAgB,CAAC,UAAU,eAAe,KAAK;QAErD,MAAM,cAAc;QAEpB,MAAM,WAAW,SAAS,cAAc,CAAC,iBAAiB,KAAK;QAC/D,MAAM,WAAW,SAAS,cAAc,CAAC,iBAAiB,KAAK;QAE/D,uBAAuB;QACvB,IAAG,CAAC,YAAY,CAAC,UAAU;YACvB,QAAQ,KAAK,CAAC;YACd;QACJ;QACI,MAAM,MAAM,UAAU;QAE1B,wBAAwB;QACxB,SAAS,cAAc,CAAC,iBAAiB,KAAK,GAAG;QACjD,SAAS,cAAc,CAAC,iBAAiB,KAAK,GAAG;IAErD;AACJ;AAEI,yBAAyB;AAEzB,uBAAuB;AACvB,eAAe,MAAM,QAAQ,EAAE,QAAQ;IAEnC,IAAG;QACC,MAAM,WAAW,MAAM,MAAM,WAAW;YACpC,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAU;YAAS;QAC9C;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,QAAQ,GAAG,CAAC;QAEZ,IAAI,KAAK,KAAK,EAAE;YACZ,aAAa,OAAO,CAAC,SAAS,KAAK,KAAK;YACxC,OAAO,QAAQ,CAAC,IAAI,GAAG;QAE3B,OAAK;YACD,gBAAgB;YAChB,MAAM,iBAAiB,SAAS,cAAc,CAAC;YAC/C,MAAM,YAAY,SAAS,cAAc,CAAC;YAE1C,UAAU,SAAS,GAAG;YACtB,MAAM,KAAK,SAAS,aAAa,CAAC;YAElC,GAAG,WAAW,GAAE;YAChB,GAAG,KAAK,CAAC,KAAK,GAAG;YACjB,GAAG,KAAK,CAAC,SAAS,GAAG;YACrB,GAAG,KAAK,CAAC,SAAS,GAAG;YAErB,UAAU,WAAW,CAAC;YACtB,eAAe,KAAK,CAAC,OAAO,GAAG;QACnC;IACR,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,qBAAqB;IACvC;AACA","sources":["src/main.js"],"sourcesContent":["//Definierar URL:s\r\nconst Url = \"http://localhost:3000/api\";\r\nconst url_Login = `${Url}/login`;\r\nconst url_Protected = `${Url}/Protected`;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\r\n    //Hämta ID för log-in formulär\r\n    const loginForm = document.getElementById(\"loginForm\");\r\n\r\n    //Kontroll om formulär finns\r\n    if(!loginForm) {\r\n        console.error(\"Kan inte hitta formulär.\");\r\n        return;\r\n    }\r\n\r\n    //Händelselyssnar för login-formulär\r\n    loginForm.addEventListener(\"submit\", async function(event) {\r\n\r\n        event.preventDefault();\r\n\r\n        const username = document.getElementById(\"loginUsername\").value;\r\n        const password = document.getElementById(\"loginPassword\").value;\r\n    \r\n        //Kontrollera inputfält\r\n        if(!username || !password) {\r\n            console.error(\"Användarnamn och lösenord krävs.\");\r\n            return;\r\n        }\r\n            await logIn(username, password);\r\n    \r\n        //Återställer input-fält\r\n        document.getElementById(\"loginUsername\").value = \"\";\r\n        document.getElementById(\"loginPassword\").value = \"\";\r\n   \r\n    });\r\n});\r\n\r\n    //*****FUNKTIONER******//\r\n\r\n    //Funktion för logga in\r\n    async function logIn(username, password) {\r\n\r\n        try{\r\n            const response = await fetch(url_Login, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({ username, password })\r\n            });\r\n\r\n            const data = await response.json();\r\n            console.log(data);\r\n\r\n            if (data.token) {\r\n                localStorage.setItem(\"token\", data.token);\r\n                window.location.href = \"protected.html\";\r\n            \r\n            }else{\r\n                //Felaktig input\r\n                const errorContainer = document.getElementById(\"error_container\");\r\n                const errorList = document.getElementById(\"error_list\");\r\n\r\n                errorList.innerHTML = \"\";\r\n                const li = document.createElement(\"li\");\r\n\r\n                li.textContent =\"Fel användarnamn/lösenord\";\r\n                li.style.color = \"white\";\r\n                li.style.listStyle = \"none\";\r\n                li.style.textAlign = \"center\";\r\n\r\n                errorList.appendChild(li);\r\n                errorContainer.style.display = \"block\";\r\n            }       \r\n    } catch (error) {\r\n        console.error(\"Error logging in:\", error);\r\n    }\r\n    }    \r\n\r\n\r\n\r\n"],"names":[],"version":3,"file":"index.de158e3a.js.map","sourceRoot":"/__parcel_source_root/"}