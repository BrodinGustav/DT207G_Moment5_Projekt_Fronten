{"mappings":"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","sources":["src/protected.js"],"sourcesContent":["//Definierar URL:s\r\nconst Url = \"http://localhost:3000/api\";\r\nconst url_Protected = `${Url}/Protected`;\r\nconst url_Menu = `${Url}/menu`;\r\nconst url_Delete = `${Url}/menu/`;\r\nconst url_createMenu = `${Url}/createMenu`;\r\nconst url_Update = `${Url}/menu/`;\r\n\r\n\r\n\r\n\r\n//***********Funktion för att hämta skyddad data*********'\r\n\r\nasync function getProtectedData() {\r\n    try{\r\n        const token = localStorage.getItem(\"token\");\r\n        const response = await fetch(url_Protected, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\": `Bearer ${token}`\r\n            }\r\n        });\r\n\r\n        const data = await response.json();\r\n        console.log(data);\r\n\r\n        //Hämtar ID\r\n        const protectedContent = document.getElementById(\"protectedContent\");\r\n        protectedContent.classList.add(\"protectedContent\")\r\n        protectedContent.innerHTML = `<p>Välkommen anställd Id-nr 1</p>`\r\n        const protectedData = document.getElementById(\"protectedData\")\r\n        protectedData.classList.add(\"protectedData\")\r\n    \r\n    } catch (error) {\r\n        console.error(\"Error vid fetching av data:\", error);\r\n    }\r\n}\r\n\r\n//********** Funktion för hämtning av meny-data ***********\r\n\r\n//Hämta in meny\r\nasync function fetchMenu() {\r\n    try{\r\n        const response = await fetch(url_Menu, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        });\r\n\r\n        //Kontroll kring fetch\r\n        if(!response.ok){\r\n            throw new Error(`Http error! Statis: ${response.status}`);\r\n        }\r\n\r\n        const menuData = await response.json();\r\n        renderMenu(menuData);\r\n    } catch (error) {\r\n        console.error('Error fetching menu:', error);\r\n    }\r\n\r\n}\r\n\r\n//****Funktion för rendering av meny************\r\n\r\nfunction renderMenu(menuData) {\r\n    const menuContainer = document.querySelector(\".menu-categories\");\r\n    menuContainer.innerHTML = \"\";                                      //Rensar innehåll\r\n\r\n    menuData.forEach(item => {\r\n        //Kontroll över format från fetch\r\n        if (!item.name || !item.description || !item.price || !item._id) {\r\n            console.error('Invalid item format:', item);\r\n            return;\r\n        }\r\n\r\n        menuData.forEach(menu => {\r\n            const menuItem = document.createElement(\"div\");\r\n            menuItem.className = \"menu-item\";\r\n            menuItem.innerHTML = `\r\n                <h3>${menu.name}</h3>\r\n                <p>${menu.description}</p>\r\n                <p>Pris: ${menu.price}</p>\r\n                <button class=\"update-btn\" data-menu-id=\"${menu._id}\">Uppdatera</button>\r\n                <button class=\"deleteBtn\">Radera</button>\r\n                \r\n            `;\r\n            menuContainer.appendChild(menuItem);\r\n        });\r\n\r\n        //Skapat element för utskrift \r\n        /*\r\n        const menuItemDiv = document.createElement('div');\r\n        menuItemDiv.classList.add('menu-item');\r\n\r\n        const itemInfoDiv = document.createElement('div');\r\n        itemInfoDiv.classList.add('menu-item-info');\r\n\r\n        const itemName = document.createElement('h4');\r\n        itemName.textContent = item.name;\r\n        itemInfoDiv.appendChild(itemName);\r\n\r\n        const itemDescription = document.createElement('p');\r\n        itemDescription.textContent = item.description;\r\n        itemInfoDiv.appendChild(itemDescription);\r\n\r\n        const itemPrice = document.createElement('span');\r\n        itemPrice.classList.add('price');\r\n        itemPrice.textContent = `${item.price} SEK`;\r\n        itemInfoDiv.appendChild(itemPrice);\r\n\r\n        menuItemDiv.appendChild(itemInfoDiv);                   //Lägger appendChild innan button-element för rätt struktur\r\n\r\n        const deleteBtn = document.createElement('button');\r\n        deleteBtn.classList.add('deleteBtn');\r\n        deleteBtn.textContent = 'Radera';\r\n        deleteBtn.addEventListener('click', () => deleteMenu(item._id));\r\n\r\n        menuItemDiv.appendChild(deleteBtn);                     //Lägger till knapp till menuItemDiv\r\n        menuContainer.appendChild(menuItemDiv);                 //Lägger till menuItemDiv till menycontainern\r\n   */\r\n    });\r\n\r\n     // Lägg till händelselyssnare för uppdateringsknapparna\r\n     document.querySelectorAll(\".update-btn\").forEach(button => {\r\n        button.addEventListener(\"click\", function () {\r\n            const menuId = this.getAttribute(\"data-menu-id\");\r\n            openUpdateForm(menuId);\r\n        });\r\n    });\r\n\r\n    document.querySelectorAll(\".deleteBtn\").forEach(button => {\r\n        button.addEventListener(\"click\", function () {\r\n            deleteMenu(item._id)\r\n        });\r\n    });\r\n}\r\n\r\n\r\n//*******Funktion för att lägga till meny*******/\r\n \r\n// Hämta ID för formulär för att skapa meny\r\nconst createMenuForm = document.getElementById(\"createMenuForm\");\r\n\r\n// Kontroll om formulär finns\r\nif (!createMenuForm) {\r\n    console.error(\"Kan inte hitta formulär.\");\r\n} else {\r\n    console.log(\"Meny-formulär hittades.\");\r\n}\r\n\r\n    //Händelselyssnare\r\ncreateMenuForm.addEventListener(\"submit\", async function (event) {\r\n    event.preventDefault();\r\n\r\n    //Hämta värden från formulär\r\n    const foodName = document.getElementById(\"foodName\").value;\r\n    const foodDescription = document.getElementById(\"foodDescription\").value;\r\n    const foodPrice = document.getElementById(\"foodPrice\").value;\r\n\r\n    //skapa objekt\r\n    const formData = {\r\n        name: foodName,\r\n        description: foodDescription,\r\n        price: foodPrice\r\n    };\r\n\r\n    //Postanrop\r\n    try{\r\n        const response = await fetch(url_createMenu, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(formData)                  //Konverterar formulärvärden till JSON och skickar med POST-anrop\r\n        });\r\n    \r\n        //Kontroll om lyckat anrop\r\n        if(response.ok) {\r\n            const data = await response.json();\r\n            console.log(data.message);                      //Kontroll-logg\r\n            console.log(data.error); \r\n\r\n             // Hämtar menydata på nytt för att uppdatera visningen\r\n             fetchMenu();\r\n\r\n        }else{\r\n            console.error(\"Error\", response);               //Kontroll-logg\r\n        }\r\n    }catch (error) {\r\n        console.log(\"Error:\", error);\r\n    }\r\n});\r\n\r\n//*********Funktion för uppdatering av maträtt*******/\r\n\r\n// Hämta ID för formulär för att skapa meny\r\nfunction openUpdateForm(menuId) {\r\nconst updateForm = document.getElementById(\"updateMenuForm\");\r\nupdateForm.setAttribue(\"data-menu-id\", menuId);\r\n\r\nupdateForm.style.display = \"block\";  // Visa formuläret\r\n}\r\n\r\nconst updateMenuForm = document.getElementById(\"updateMenuForm\");\r\n\r\n// Kontroll om formulär finns\r\nif (!updateMenuForm) {\r\n    console.error(\"Kan inte hitta formulär.\");\r\n} else {\r\n    console.log(\"Update-formulär hittades.\");\r\n}\r\n\r\n\r\n//Händelselyssnare\r\nupdateMenuForm.addEventListener(\"submit\", async function (event) {\r\n    event.preventDefault();\r\n    \r\n//Hämta värden från formulär\r\nconst foodName = document.getElementById(\"foodName\").value;\r\nconst foodDescription = document.getElementById(\"foodDescription\").value;\r\nconst foodPrice = document.getElementById(\"foodPrice\").value;\r\nconst menuId = updateMenuForm.getAttribute(\"data-menu-id\"); // Hämtar menuID från data-attributet\r\n\r\n//skapa objekt\r\nconst formData = {\r\n    name: foodName,\r\n    description: foodDescription,\r\n    price: foodPrice\r\n};\r\n\r\n//Kontroll log\r\nconsole.log(\"Form data som skickas:\", formData);\r\nconsole.log(\"Menu ID:\", menuId);\r\n\r\n    try{\r\n        const response = await fetch(`${url_Update}${menuId}`, {    //Skickar med ID för formulären för unik identifierare\r\n            method: \"PUT\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify(formData)  \r\n        });\r\n\r\n        // Kontroll om lyckat anrop\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            console.log(data.message); // Kontroll-logg\r\n            console.log(data.error);\r\n\r\n             // Hämtar menydata på nytt för att uppdatera visningen\r\n             fetchMenu();\r\n\r\n    }else {\r\n        console.error(\"Error vid uppdatering av meny:\", response);\r\n    }\r\n    }catch(error){\r\n        console.log(\"Error\", error);\r\n    }\r\n});\r\n\r\n\r\n//*********Funktion för att radera av meny********/\r\n\r\nasync function deleteMenu(_id) {\r\n    try{\r\n        const response = await fetch(`${url_Delete}${_id}`, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        });\r\n\r\n        //Kontroll response\r\n        if(!response.ok){\r\n            throw new Error(`Http error! Status: ${response.status}`);\r\n        }\r\n\r\n        //Konvertera svar till JSON\r\n        const result = await response.json();\r\n        console.log(result);                                         //Kontroll-logg\r\n        \r\n        //Hämta meny efter radering\r\n        fetchMenu();\r\n        console.log(\"Meny raderad!\");\r\n    }catch(error) {\r\n        console.error(\"Error vid radering av meny:\", error);\r\n    }\r\n}     \r\n//******Funktion för att logga ut********\r\nfunction logOut() {\r\n    localStorage.removeItem(\"token\");                                           //Tar bort token vid utlogg\r\n    document.getElementById(\"protectedData\").style.display = \"none\";            //Gömmer ID vid utlogg\r\n    window.location.href = 'index.html';\r\n}\r\n\r\n//Anropar fetch \r\ndocument.addEventListener(\"DOMContentLoaded\", fetchMenu);\r\n\r\n\r\n\r\n"],"names":[],"version":3,"file":"protected.083fdc3b.js.map","sourceRoot":"/__parcel_source_root/"}